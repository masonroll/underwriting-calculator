<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Underwriting Dashboard | CyberSell</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/style.css">
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'navy': '#1e3a5f',
                        'navy-dark': '#152a46',
                        'navy-light': '#2c5282',
                        'silver': '#e2e8f0',
                        'silver-dark': '#cbd5e0',
                    }
                }
            }
        }
    </script>

    <!-- Authentication Check -->
    <script>
        // Check if user is logged in
        const currentUser = localStorage.getItem('currentUser');
        if (!currentUser) {
            // Not logged in, redirect to login page
            window.location.href = 'login.html';
        }
    </script>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-navy shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <div class="flex-shrink-0 flex items-center">
                        <h1 class="text-2xl font-bold text-white">RE Underwriting Pro</h1>
                    </div>
                    <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                        <a href="#" onclick="showView('dashboard')" class="nav-link border-b-2 border-white text-white inline-flex items-center px-1 pt-1 text-sm font-medium">
                            Dashboard
                        </a>
                        <a href="#" onclick="showView('add-deal')" class="nav-link border-transparent text-gray-300 hover:border-gray-300 hover:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Add Deal
                        </a>
                        <a href="#" onclick="showView('analytics')" class="nav-link border-transparent text-gray-300 hover:border-gray-300 hover:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Analytics
                        </a>
                        <a href="#" onclick="showView('exports')" class="nav-link border-transparent text-gray-300 hover:border-gray-300 hover:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Exports
                        </a>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span id="user-name" class="text-white text-sm font-medium"></span>
                    <button onclick="handleLogout()" class="bg-red-600 hover:bg-red-700 text-white text-sm px-4 py-2 rounded-md">
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-3 sm:px-4 lg:px-6">
        
        <!-- Dashboard View -->
        <div id="dashboard-view" class="view-container">
            <div class="px-4 py-3 sm:px-0">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-900">Active Deals</h2>
                    <button onclick="showView('add-deal')" class="bg-navy hover:bg-navy-dark text-white font-bold py-1.5 px-3 rounded text-sm">
                        + New Deal
                    </button>
                </div>
                
                <!-- Deals Grid -->
                <div id="deals-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Deals will be dynamically loaded here -->
                </div>
                
                <!-- Empty State -->
                <div id="empty-state" class="text-center py-8 hidden">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <h3 class="mt-2 text-sm font-medium text-gray-900">No deals yet</h3>
                    <p class="mt-1 text-sm text-gray-500">Get started by creating a new deal.</p>
                    <div class="mt-6">
                        <button onclick="showView('add-deal')" class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-navy hover:bg-navy-dark">
                            + Add Deal
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Deal View -->
        <div id="add-deal-view" class="view-container hidden">
            <div class="px-4 py-3 sm:px-0">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-900">Underwrite New Deal</h2>
                    <button onclick="showView('dashboard')" class="text-gray-600 hover:text-gray-900">
                        ‚Üê Back to Dashboard
                    </button>
                </div>

                <form id="deal-form" class="space-y-4">
                    <!-- Property Information -->
                    <div class="bg-white shadow rounded-lg p-4">
                        <h3 class="text-base font-semibold text-gray-900 mb-3">Property Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Property Name</label>
                                <input type="text" id="property-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Address</label>
                                <input type="text" id="address" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" required>
                                <button type="button" onclick="fetchPropertyData()" class="mt-2 text-sm text-navy hover:text-navy-dark">üìç Auto-fill from MLS</button>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Property Type</label>
                                <select id="property-type" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" onchange="handlePropertyTypeChange()">
                                    <option>Single Family</option>
                                    <option>Multi-Family</option>
                                    <option>Commercial</option>
                                    <option>Mixed-Use</option>
                                    <option>Self Storage</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Square Footage</label>
                                <input type="number" id="sqft" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" oninput="updatePricePerSqft()">
                                <p id="price-per-sqft" class="mt-1 text-sm text-gray-600">Price/sqft: $0</p>
                            </div>
                        </div>
                    </div>

                    <!-- Acquisition Details -->
                    <div class="bg-white shadow rounded-lg p-4">
                        <h3 class="text-base font-semibold text-gray-900 mb-3">Acquisition Details</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Purchase Price ($)</label>
                                <input type="number" id="purchase-price" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateClosingCosts(); updatePricePerSqft(); updateLoanAmount()" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Rehab Costs ($)</label>
                                <input type="number" id="rehab-costs" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Closing Cost %</label>
                                <input type="number" id="closing-cost-percent" step="0.1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="3" oninput="updateClosingCosts()">
                                <p class="mt-1 text-sm text-gray-600">Default: 3%</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Closing Costs ($)</label>
                                <input type="number" id="closing-costs" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" readonly>
                                <p class="mt-1 text-sm text-gray-600">Auto-calculated</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">After Repair Value (ARV) ($)</label>
                                <input type="number" id="arv" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0">
                            </div>
                        </div>
                    </div>

                    <!-- Financing -->
                    <div class="bg-white shadow rounded-lg p-4">
                        <h3 class="text-base font-semibold text-gray-900 mb-3">Financing</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Down Payment ($)</label>
                                <input type="number" id="down-payment" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateLoanAmount()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Loan Amount ($)</label>
                                <input type="number" id="loan-amount" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" readonly>
                                <p class="mt-1 text-sm text-gray-600">Auto-calculated</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Interest Rate (%)</label>
                                <input type="number" id="interest-rate" step="0.01" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="6.5">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Loan Term (years)</label>
                                <input type="number" id="loan-term" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="30">
                            </div>
                        </div>
                    </div>

                    <!-- Income & Expenses -->
                    <div class="bg-white shadow rounded-lg p-4">
                        <h3 class="text-base font-semibold text-gray-900 mb-3">Income & Operating Expenses</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Monthly Rent ($)</label>
                                <input type="number" id="monthly-rent" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Other Monthly Income ($)</label>
                                <input type="number" id="other-income" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Vacancy Rate (%)</label>
                                <input type="number" id="vacancy-rate" step="0.1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="5">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Property Tax (Annual $)</label>
                                <input type="number" id="property-tax" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Insurance (Annual $)</label>
                                <input type="number" id="insurance" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Maintenance (Annual $)</label>
                                <input type="number" id="maintenance" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">HOA/Other (Monthly $)</label>
                                <input type="number" id="hoa" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Property Mgmt (% of income)</label>
                                <input type="number" id="mgmt-fee" step="0.1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="8">
                            </div>
                        </div>
                    </div>

                    <!-- Exit Strategy -->
                    <div class="bg-white shadow rounded-lg p-4">
                        <h3 class="text-base font-semibold text-gray-900 mb-3">Exit Strategy</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Expected Sale Price ($)</label>
                                <input type="number" id="sale-price" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Exit Cap Rate (%)</label>
                                <input type="number" id="exit-cap-rate" step="0.01" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="6.5">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Holding Period (years)</label>
                                <input type="number" id="holding-period" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="5">
                            </div>
                        </div>
                    </div>

                    <!-- Self Storage Specific Sections (Hidden by default) -->
                    <div id="self-storage-sections" class="hidden space-y-4">
                        
                        <!-- Storage Property Details -->
                        <div class="bg-blue-50 shadow rounded-lg p-4 border-2 border-blue-200">
                            <h3 class="text-base font-semibold text-blue-900 mb-3">üì¶ Self Storage Details</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Number of Units</label>
                                    <input type="number" id="storage-num-units-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealPricePerUnit()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Price Per Unit ($)</label>
                                    <input type="number" id="storage-price-per-unit-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                    <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                                </div>
                            </div>
                        </div>

                        <!-- Storage Income Details -->
                        <div class="bg-blue-50 shadow rounded-lg p-4 border-2 border-blue-200">
                            <h3 class="text-base font-semibold text-blue-900 mb-3">üí∞ Storage Income</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Gross Scheduled Rents ($)</label>
                                    <input type="number" id="storage-gross-rents-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealIncome()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Physical Vacancy ($)</label>
                                    <input type="number" id="storage-vacancy-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealIncome()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Rent Concessions ($)</label>
                                    <input type="number" id="storage-concessions-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealIncome()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Net Storage Income ($)</label>
                                    <input type="number" id="storage-net-income-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                    <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Other Storage Income ($)</label>
                                    <input type="number" id="storage-other-storage-income-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealIncome()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Retail Sales Income ($)</label>
                                    <input type="number" id="storage-retail-sales-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealIncome()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Other Income ($)</label>
                                    <input type="number" id="storage-other-income-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealIncome()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Total Annual Income ($)</label>
                                    <input type="number" id="storage-total-income-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50 text-lg font-semibold" value="0" readonly>
                                    <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                                </div>
                            </div>
                        </div>

                        <!-- Storage Operating Expenses -->
                        <div class="bg-blue-50 shadow rounded-lg p-4 border-2 border-blue-200">
                            <h3 class="text-base font-semibold text-blue-900 mb-3">üìä Storage Operating Expenses</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Management ($)</label>
                                    <input type="number" id="storage-management-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealExpenses()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Repairs & Maintenance ($)</label>
                                    <input type="number" id="storage-repairs-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealExpenses()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Payroll ($)</label>
                                    <input type="number" id="storage-payroll-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealExpenses()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Contract Services ($)</label>
                                    <input type="number" id="storage-contract-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealExpenses()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Retail Expenses ($)</label>
                                    <input type="number" id="storage-retail-exp-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageDealExpenses()">
                                </div>
                                <div class="md:col-span-3 lg:col-span-5">
                                    <label class="block text-sm font-medium text-gray-700">Additional Storage Expenses ($)</label>
                                    <input type="number" id="storage-additional-exp-deal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50 text-lg font-semibold" value="0" readonly>
                                    <p class="mt-1 text-xs text-gray-600">Sum of storage-specific expenses</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex justify-between">
                        <button type="button" onclick="showView('dashboard')" class="px-4 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <div class="space-x-3">
                            <button type="button" onclick="calculateMetrics()" class="px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700">
                                Calculate Metrics
                            </button>
                            <button type="submit" class="px-4 py-2 bg-navy text-white text-sm rounded-md hover:bg-navy-dark">
                                Save Deal
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Results Section -->
                <div id="results-section" class="mt-4 hidden">
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Underwriting Results</h3>
                    
                    <!-- Key Metrics Cards -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
                        <div class="bg-white shadow rounded-lg p-3">
                            <h4 class="text-xs font-medium text-gray-500 uppercase">Cap Rate</h4>
                            <p id="result-cap-rate" class="text-2xl font-bold text-navy mt-1">-</p>
                        </div>
                        <div class="bg-white shadow rounded-lg p-3">
                            <h4 class="text-xs font-medium text-gray-500 uppercase">Cash-on-Cash</h4>
                            <p id="result-coc" class="text-2xl font-bold text-navy mt-1">-</p>
                        </div>
                        <div class="bg-white shadow rounded-lg p-3">
                            <h4 class="text-xs font-medium text-gray-500 uppercase">DSCR</h4>
                            <p id="result-dscr" class="text-2xl font-bold text-navy mt-1">-</p>
                        </div>
                        <div class="bg-white shadow rounded-lg p-3">
                            <h4 class="text-xs font-medium text-gray-500 uppercase">IRR</h4>
                            <p id="result-irr" class="text-2xl font-bold text-navy mt-1">-</p>
                        </div>
                    </div>

                    <!-- Detailed Metrics -->
                    <div class="bg-white shadow rounded-lg p-4 mb-4">
                        <h4 class="text-base font-semibold text-gray-900 mb-3">Detailed Analysis</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <div class="flex justify-between py-1.5 border-b text-sm">
                                    <span class="text-gray-700">Total Investment</span>
                                    <span id="result-total-investment" class="font-semibold">$0</span>
                                </div>
                                <div class="flex justify-between py-1.5 border-b text-sm">
                                    <span class="text-gray-700">Annual Gross Income</span>
                                    <span id="result-gross-income" class="font-semibold">$0</span>
                                </div>
                                <div class="flex justify-between py-1.5 border-b text-sm">
                                    <span class="text-gray-700">Annual Operating Expenses</span>
                                    <span id="result-operating-expenses" class="font-semibold">$0</span>
                                </div>
                                <div class="flex justify-between py-1.5 border-b text-sm">
                                    <span class="text-gray-700">Net Operating Income (NOI)</span>
                                    <span id="result-noi" class="font-semibold text-navy">$0</span>
                                </div>
                                <div class="flex justify-between py-1.5 border-b text-sm">
                                    <span class="text-gray-700">Annual Debt Service</span>
                                    <span id="result-debt-service" class="font-semibold">$0</span>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between py-1.5 border-b text-sm">
                                    <span class="text-gray-700">Annual Cash Flow</span>
                                    <span id="result-cash-flow" class="font-semibold">$0</span>
                                </div>
                                <div class="flex justify-between py-1.5 border-b text-sm">
                                    <span class="text-gray-700">Monthly Cash Flow</span>
                                    <span id="result-monthly-cash-flow" class="font-semibold">$0</span>
                                </div>
                                <div class="flex justify-between py-1.5 border-b text-sm">
                                    <span class="text-gray-700">Break-even Occupancy</span>
                                    <span id="result-breakeven" class="font-semibold">0%</span>
                                </div>
                                <div class="flex justify-between py-1.5 border-b text-sm">
                                    <span class="text-gray-700">ROI (5 years)</span>
                                    <span id="result-roi" class="font-semibold">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sensitivity Analysis -->
                    <div class="bg-white shadow rounded-lg p-4 mb-4">
                        <h4 class="text-base font-semibold text-gray-900 mb-3">Sensitivity Analysis</h4>
                        
                        <div class="space-y-4">
                            <!-- Rent Sensitivity -->
                            <div>
                                <div class="flex justify-between mb-2">
                                    <label class="text-sm font-medium text-gray-700">Monthly Rent</label>
                                    <span id="sensitivity-rent-value" class="text-sm font-semibold">$0</span>
                                </div>
                                <input type="range" id="sensitivity-rent" class="w-full" min="0" max="10000" step="50" oninput="updateSensitivity()">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>-50%</span>
                                    <span>+50%</span>
                                </div>
                                <div class="mt-2 text-sm">
                                    <span class="text-gray-700">Impact on CoC:</span>
                                    <span id="sensitivity-rent-impact" class="font-semibold ml-2">-</span>
                                </div>
                            </div>

                            <!-- Vacancy Sensitivity -->
                            <div>
                                <div class="flex justify-between mb-2">
                                    <label class="text-sm font-medium text-gray-700">Vacancy Rate</label>
                                    <span id="sensitivity-vacancy-value" class="text-sm font-semibold">0%</span>
                                </div>
                                <input type="range" id="sensitivity-vacancy" class="w-full" min="0" max="30" step="0.5" oninput="updateSensitivity()">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>0%</span>
                                    <span>30%</span>
                                </div>
                                <div class="mt-2 text-sm">
                                    <span class="text-gray-700">Impact on CoC:</span>
                                    <span id="sensitivity-vacancy-impact" class="font-semibold ml-2">-</span>
                                </div>
                            </div>

                            <!-- Exit Cap Rate Sensitivity -->
                            <div>
                                <div class="flex justify-between mb-2">
                                    <label class="text-sm font-medium text-gray-700">Exit Cap Rate</label>
                                    <span id="sensitivity-exit-cap-value" class="text-sm font-semibold">0%</span>
                                </div>
                                <input type="range" id="sensitivity-exit-cap" class="w-full" min="3" max="12" step="0.1" oninput="updateSensitivity()">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>3%</span>
                                    <span>12%</span>
                                </div>
                                <div class="mt-2 text-sm">
                                    <span class="text-gray-700">Impact on IRR:</span>
                                    <span id="sensitivity-exit-cap-impact" class="font-semibold ml-2">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Visualization -->
                    <div class="bg-white shadow rounded-lg p-4">
                        <h4 class="text-base font-semibold text-gray-900 mb-3">Cash Flow Projection</h4>
                        <canvas id="cashflow-chart" height="80"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Self Storage Analyzer View -->
        <div id="self-storage-view" class="view-container hidden">
            <div class="px-4 py-3 sm:px-0">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-900">Self Storage Profit Analyzer</h2>
                    <button onclick="showView('dashboard')" class="text-gray-600 hover:text-gray-900">
                        ‚Üê Back to Dashboard
                    </button>
                </div>

                <form id="storage-form" class="space-y-4">
                    <!-- Property Information -->
                    <div class="bg-white shadow rounded-lg p-4">
                        <h3 class="text-base font-semibold text-gray-900 mb-3">Property Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Property Name</label>
                                <input type="text" id="storage-property-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Date</label>
                                <input type="date" id="storage-date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Number of Units</label>
                                <input type="number" id="storage-num-units" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStoragePricePerUnit()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Purchase Price ($)</label>
                                <input type="number" id="storage-purchase-price" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStoragePricePerUnit(); updateStoragePricePerSqft(); updateStorageMortgage()" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Price Per Unit ($)</label>
                                <input type="number" id="storage-price-per-unit" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Rentable Square Footage</label>
                                <input type="number" id="storage-sqft" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStoragePricePerSqft()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Price Per Square Foot ($)</label>
                                <input type="number" id="storage-price-per-sqft" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                        </div>
                    </div>

                    <!-- Mortgage Info -->
                    <div class="bg-white shadow rounded-lg p-4">
                        <h3 class="text-base font-semibold text-gray-900 mb-3">Mortgage Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Purchase Price ($)</label>
                                <input type="number" id="storage-mort-purchase-price" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">% Down</label>
                                <input type="number" id="storage-down-percent" step="0.1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="20" oninput="updateStorageMortgage()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Down Payment ($)</label>
                                <input type="number" id="storage-down-payment" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Loan Amount ($)</label>
                                <input type="number" id="storage-loan-amount" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Interest Rate (%)</label>
                                <input type="number" id="storage-interest-rate" step="0.01" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="6.5" oninput="updateStorageMortgage()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Amortization (Years)</label>
                                <input type="number" id="storage-amortization" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="25" oninput="updateStorageMortgage()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Annual Debt Service ($)</label>
                                <input type="number" id="storage-annual-debt" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                        </div>
                    </div>

                    <!-- Closing/Acquisition Costs -->
                    <div class="bg-white shadow rounded-lg p-4">
                        <h3 class="text-base font-semibold text-gray-900 mb-3">Closing/Acquisition Costs</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Closing Costs ($)</label>
                                <input type="number" id="storage-closing-costs" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageClosingCosts()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Loan Points (%)</label>
                                <input type="number" id="storage-loan-points" step="0.1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageClosingCosts()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Loan Point Cost ($)</label>
                                <input type="number" id="storage-loan-point-cost" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Expense Reimb. %</label>
                                <input type="number" id="storage-expense-reimb-percent" step="0.1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageClosingCosts()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Expense Reimb. Amount ($)</label>
                                <input type="number" id="storage-expense-reimb-amount" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Closing Costs - Other ($)</label>
                                <input type="number" id="storage-closing-costs-other" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageClosingCosts()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Total Closing Costs ($)</label>
                                <input type="number" id="storage-total-closing-costs" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Total Acquisition Costs ($)</label>
                                <input type="number" id="storage-total-acquisition-costs" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                        </div>
                    </div>

                    <!-- Income -->
                    <div class="bg-white shadow rounded-lg p-4">
                        <h3 class="text-base font-semibold text-gray-900 mb-3">Income</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Gross Scheduled Rents ($)</label>
                                <input type="number" id="storage-gross-rents" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageIncome()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Physical Vacancy ($)</label>
                                <input type="number" id="storage-vacancy" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageIncome()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Rent Concessions ($)</label>
                                <input type="number" id="storage-concessions" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageIncome()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Net Storage Income ($)</label>
                                <input type="number" id="storage-net-storage-income" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Other Storage Income ($)</label>
                                <input type="number" id="storage-other-storage-income" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageIncome()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Other Rental Income ($)</label>
                                <input type="number" id="storage-other-rental-income" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageIncome()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Retail Sales Income ($)</label>
                                <input type="number" id="storage-retail-sales" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageIncome()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Office Income ($)</label>
                                <input type="number" id="storage-office-income" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageIncome()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Other Income 1 ($)</label>
                                <input type="number" id="storage-other-income-1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageIncome()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Other Income 2 ($)</label>
                                <input type="number" id="storage-other-income-2" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageIncome()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Other Income 3 ($)</label>
                                <input type="number" id="storage-other-income-3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageIncome()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Other Income 4 ($)</label>
                                <input type="number" id="storage-other-income-4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageIncome()">
                            </div>
                            <div class="md:col-span-3 lg:col-span-4">
                                <label class="block text-sm font-medium text-gray-700">Total Operating Income ($)</label>
                                <input type="number" id="storage-total-operating-income" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50 text-lg font-semibold" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                        </div>
                    </div>

                    <!-- Expenses -->
                    <div class="bg-white shadow rounded-lg p-4">
                        <h3 class="text-base font-semibold text-gray-900 mb-3">Expenses</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Taxes ($)</label>
                                <input type="number" id="storage-taxes" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageExpenses()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Insurance ($)</label>
                                <input type="number" id="storage-insurance" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageExpenses()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Repairs and Maintenance ($)</label>
                                <input type="number" id="storage-repairs" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageExpenses()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Administration ($)</label>
                                <input type="number" id="storage-admin" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageExpenses()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Management ($)</label>
                                <input type="number" id="storage-management" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageExpenses()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Contract Services ($)</label>
                                <input type="number" id="storage-contract-services" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageExpenses()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Utilities ($)</label>
                                <input type="number" id="storage-utilities" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageExpenses()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Payroll ($)</label>
                                <input type="number" id="storage-payroll" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageExpenses()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Retail Expenses ($)</label>
                                <input type="number" id="storage-retail-expenses" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageExpenses()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Office Income Exp ($)</label>
                                <input type="number" id="storage-office-expense" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy" value="0" oninput="updateStorageExpenses()">
                            </div>
                            <div class="md:col-span-3 lg:col-span-5">
                                <label class="block text-sm font-medium text-gray-700">Total Operating Expenses ($)</label>
                                <input type="number" id="storage-total-expenses" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-navy focus:ring-navy bg-gray-50 text-lg font-semibold" value="0" readonly>
                                <p class="mt-1 text-xs text-gray-600">Auto-calculated</p>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex justify-between">
                        <button type="button" onclick="showView('dashboard')" class="px-4 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <div class="space-x-3">
                            <button type="button" onclick="calculateStorageMetrics()" class="px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700">
                                Calculate Analysis
                            </button>
                            <button type="submit" class="px-4 py-2 bg-navy text-white text-sm rounded-md hover:bg-navy-dark">
                                Save Analysis
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Storage Results Section -->
                <div id="storage-results-section" class="mt-4 hidden">
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Analysis Results</h3>
                    
                    <!-- Key Metrics Cards -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
                        <div class="bg-white shadow rounded-lg p-3">
                            <h4 class="text-xs font-medium text-gray-500 uppercase">NOI</h4>
                            <p id="storage-result-noi" class="text-2xl font-bold text-navy mt-1">$0</p>
                        </div>
                        <div class="bg-white shadow rounded-lg p-3">
                            <h4 class="text-xs font-medium text-gray-500 uppercase">Cap Rate</h4>
                            <p id="storage-result-cap-rate" class="text-2xl font-bold text-navy mt-1">0%</p>
                        </div>
                        <div class="bg-white shadow rounded-lg p-3">
                            <h4 class="text-xs font-medium text-gray-500 uppercase">DSCR</h4>
                            <p id="storage-result-dscr" class="text-2xl font-bold text-navy mt-1">0.00</p>
                        </div>
                        <div class="bg-white shadow rounded-lg p-3">
                            <h4 class="text-xs font-medium text-gray-500 uppercase">Cash Flow</h4>
                            <p id="storage-result-cash-flow" class="text-2xl font-bold text-navy mt-1">$0</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics View -->
        <div id="analytics-view" class="view-container hidden">
            <div class="px-4 py-3 sm:px-0">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">Portfolio Analytics</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <div class="bg-white shadow rounded-lg p-4">
                        <h4 class="text-xs font-medium text-gray-500 uppercase">Total Deals</h4>
                        <p id="analytics-total-deals" class="text-2xl font-bold text-navy mt-1">0</p>
                    </div>
                    <div class="bg-white shadow rounded-lg p-4">
                        <h4 class="text-xs font-medium text-gray-500 uppercase">Avg Cap Rate</h4>
                        <p id="analytics-avg-cap" class="text-2xl font-bold text-navy mt-1">0%</p>
                    </div>
                    <div class="bg-white shadow rounded-lg p-4">
                        <h4 class="text-xs font-medium text-gray-500 uppercase">Total Portfolio Value</h4>
                        <p id="analytics-total-value" class="text-2xl font-bold text-navy mt-1">$0</p>
                    </div>
                </div>

                <div class="bg-white shadow rounded-lg p-4 mb-4">
                    <h4 class="text-base font-semibold text-gray-900 mb-3">Deals Comparison</h4>
                    <canvas id="comparison-chart" height="80"></canvas>
                </div>
            </div>
        </div>

        <!-- Exports View -->
        <div id="exports-view" class="view-container hidden">
            <div class="px-4 py-3 sm:px-0">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">Export Data</h2>
                
                <div class="bg-white shadow rounded-lg p-4">
                    <h4 class="text-base font-semibold text-gray-900 mb-3">Export Options</h4>
                    
                    <div class="space-y-4">
                        <button onclick="exportToCSV()" class="w-full md:w-auto px-6 py-3 bg-navy text-white rounded-md hover:bg-navy-dark">
                            üìä Export All Deals to CSV
                        </button>
                        <button onclick="exportToJSON()" class="w-full md:w-auto ml-0 md:ml-4 px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                            üíæ Export as JSON
                        </button>
                        <button onclick="printReport()" class="w-full md:w-auto ml-0 md:ml-4 px-6 py-3 bg-gray-600 text-white rounded-md hover:bg-gray-700">
                            üñ®Ô∏è Print Report
                        </button>
                    </div>

                    <div class="mt-8">
                        <h5 class="font-semibold text-gray-900 mb-2">Import Data</h5>
                        <input type="file" id="import-file" accept=".json,.csv" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-navy file:text-white hover:file:bg-navy-dark">
                        <button onclick="importData()" class="mt-2 px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700">
                            Import Data
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-navy mt-12">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-gray-300 text-sm">
                ¬© 2025 CyberSell Real Estate Underwriting | underwrite.cybersell.us
            </p>
        </div>
    </footer>

    <!-- Main JavaScript -->
    <script src="assets/js/main.js"></script>
</body>
</html>
